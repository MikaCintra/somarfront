<div class="campanhas-container">
  <header class="page-header">
    <div>
      <h1>ğŸ“¢ Campanhas</h1>
      <p *ngIf="userType === 'ong'">Gerencie suas campanhas e acompanhe o progresso</p>
      <p *ngIf="userType !== 'ong'">Explore campanhas e faÃ§a a diferenÃ§a</p>
    </div>
    <app-theme-language-toggle></app-theme-language-toggle>
  </header>

  <!-- Filtros -->
  <section class="filters-section">
    <div class="filters-grid">
      <div class="filter-item">
        <label>ğŸ” Buscar</label>
        <input 
          type="text" 
          [(ngModel)]="searchQuery"
          (input)="applyFilters()"
          placeholder="Pesquisar campanhas..."
          class="filter-input"
        />
      </div>

      <div class="filter-item">
        <label>ğŸ“‚ Categoria</label>
        <select 
          [(ngModel)]="selectedCategory"
          (change)="applyFilters()"
          class="filter-select"
        >
          <option value="">Todas</option>
          <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>
      </div>

      <div class="filter-item" *ngIf="userType === 'ong'">
        <label>ğŸ“Š Status</label>
        <select 
          [(ngModel)]="selectedStatus"
          (change)="applyFilters()"
          class="filter-select"
        >
          <option value="">Todos</option>
          <option value="active">Ativa</option>
          <option value="paused">Pausada</option>
          <option value="completed">ConcluÃ­da</option>
        </select>
      </div>

      <div class="filter-item">
        <label>âš¡ UrgÃªncia</label>
        <select 
          [(ngModel)]="selectedUrgency"
          (change)="applyFilters()"
          class="filter-select"
        >
          <option value="">Todas</option>
          <option value="high">Urgente</option>
          <option value="medium">Importante</option>
          <option value="low">Normal</option>
        </select>
      </div>

      <button class="btn-clear" (click)="clearFilters()">
        Limpar Filtros
      </button>
    </div>

    <p class="results-count">
      {{ filteredCampaigns.length }} campanha(s) encontrada(s)
    </p>
  </section>

  <!-- Lista de Campanhas -->
  <section class="campaigns-section">
    <div class="campaigns-grid">
      <div class="campaign-card" *ngFor="let campaign of filteredCampaigns">
        <div class="campaign-header">
          <span class="campaign-badge" [style.background-color]="getUrgencyColor(campaign.urgency)">
            {{ getUrgencyLabel(campaign.urgency) }}
          </span>
          <span class="campaign-status" *ngIf="userType === 'ong'">
            {{ getStatusLabel(campaign.status) }}
          </span>
        </div>

        <h3>{{ campaign.title }}</h3>
        <p class="campaign-description">{{ campaign.description }}</p>

        <div class="campaign-info">
          <div class="info-item">
            <span class="info-icon">ğŸ¢</span>
            <span>{{ campaign.ongName }}</span>
          </div>
          <div class="info-item">
            <span class="info-icon">ğŸ“‚</span>
            <span>{{ campaign.category }}</span>
          </div>
          <div class="info-item" *ngIf="campaign.location">
            <span class="info-icon">ğŸ“</span>
            <span>{{ campaign.location }}</span>
          </div>
        </div>

        <div class="campaign-progress">
          <div class="progress-info">
            <span class="progress-current">{{ campaign.current }} itens</span>
            <span class="progress-goal">Meta: {{ campaign.goal }}</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="getProgressPercentage(campaign)"></div>
          </div>
          <span class="progress-percentage">{{ getProgressPercentage(campaign) }}%</span>
        </div>

        <button class="btn-view" (click)="viewCampaign(campaign)">
          Ver Detalhes
        </button>
      </div>
    </div>

    <div class="empty-state" *ngIf="filteredCampaigns.length === 0">
      <div class="empty-icon">ğŸ“¢</div>
      <h3>Nenhuma campanha encontrada</h3>
      <p>Tente ajustar os filtros ou {{ userType === 'ong' ? 'criar uma nova campanha' : 'volte mais tarde' }}</p>
    </div>
  </section>
</div>
